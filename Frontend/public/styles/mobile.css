/* ====== MOBILE-FIRST RESPONSIVE DESIGN ====== */

/* Touch-friendly min target size: 48px */
button,
select,
input,
textarea,
a {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  min-height: 44px;
  min-width: 44px;
}

input,
textarea,
select {
  -webkit-user-select: text;
  user-select: text;
  font-size: 16px; /* Prevents zoom on iOS */
}

/* Prevent text zoom on orientation change */
html {
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Safe area support for notch devices */
@supports (padding: max(0px)) {
  body {
    padding-left: max(12px, env(safe-area-inset-left));
    padding-right: max(12px, env(safe-area-inset-right));
    padding-top: max(12px, env(safe-area-inset-top));
    padding-bottom: max(12px, env(safe-area-inset-bottom));
  }

  .app-shell {
    padding: max(12px, env(safe-area-inset-top))
            max(12px, env(safe-area-inset-right))
            max(12px, env(safe-area-inset-bottom))
            max(12px, env(safe-area-inset-left));
  }
}

/* ====== SMALL DEVICES (< 480px) ====== */
@media (max-width: 479px) {
  .app-card {
    padding: 16px;
    border-radius: 10px;
  }

  .app-title {
    font-size: 1.5rem;
    line-height: 1.2;
  }

  .app-subtitle {
    font-size: 0.9rem;
    margin-bottom: 16px;
  }

  .section-title {
    font-size: 1rem;
    margin-bottom: 8px;
  }

  .symptoms-textarea {
    padding: 10px;
    font-size: 16px;
    min-height: 100px;
    border-radius: 8px;
  }

  .input-row {
    gap: 8px;
    margin: 10px 0;
    flex-wrap: wrap;
  }

  .input-label {
    font-size: 0.95rem;
    width: 100%;
  }

  .language-select {
    width: 100%;
    padding: 10px;
    font-size: 16px;
  }

  .analyze-button {
    padding: 14px;
    font-size: 1rem;
    border-radius: 8px;
    height: 48px;
  }

  .tabs-container {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    margin-bottom: 16px;
  }

  .tab-button {
    flex: 1;
    min-width: 70px;
    padding: 10px 8px;
    font-size: 0.85rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .analytics-card {
    padding: 12px;
    margin-bottom: 12px;
  }

  .stat-value {
    font-size: 1.5rem;
  }

  .stat-label {
    font-size: 0.85rem;
  }

  .chart-container {
    height: 200px;
    margin: 12px 0;
  }

  /* Hide "View Full Directions" on tiny screens */
  .full-directions-btn {
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
  }
}

/* ====== MEDIUM DEVICES (480px - 768px) ====== */
@media (min-width: 480px) and (max-width: 767px) {
  .app-card {
    padding: 20px;
  }

  .app-title {
    font-size: 1.75rem;
  }

  .symptoms-textarea {
    min-height: 120px;
  }

  .tabs-container {
    gap: 6px;
  }

  .tab-button {
    min-width: 80px;
    font-size: 0.9rem;
  }

  .chart-container {
    height: 250px;
  }
}

/* ====== LANDSCAPE MODE ====== */
@media (max-height: 600px) and (orientation: landscape),
       (max-width: 767px) and (orientation: landscape) {
  .app-shell {
    padding: 12px;
    min-height: auto;
  }

  .app-card {
    padding: 16px;
    max-height: 95vh;
    overflow-y: auto;
  }

  .app-title {
    font-size: 1.3rem;
    margin-bottom: 8px;
  }

  .app-subtitle {
    margin-bottom: 8px;
  }

  .chart-container {
    height: 200px;
  }
}

/* ====== TABLET & LARGE DEVICES (768px+) ====== */
@media (min-width: 768px) {
  .app-card {
    padding: 28px;
    margin-top: 20px;
    margin-bottom: 20px;
  }

  .app-title {
    font-size: 2.2rem;
  }

  .tabs-container {
    gap: 8px;
  }

  .tab-button {
    min-width: 100px;
    padding: 12px 16px;
  }

  .chart-container {
    height: 300px;
  }

  .grid-2col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
}

/* ====== DESKTOP (1200px+) ====== */
@media (min-width: 1200px) {
  .app-card {
    padding: 32px;
    max-width: 900px;
  }

  .grid-2col {
    grid-template-columns: 1fr 1fr;
  }

  .grid-3col {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 20px;
  }
}

/* ====== ACCESSIBILITY & DARK MODE ====== */
@media (prefers-color-scheme: dark) {
  .app-shell {
    background: #1e293b;
  }

  .app-card {
    background: #334155;
    border-color: #475569;
  }

  .app-title,
  .app-subtitle,
  .section-title,
  .input-label,
  .status-text,
  .stat-label {
    color: #f1f5f9;
  }

  .symptoms-textarea,
  .language-select {
    background: #475569;
    color: #f1f5f9;
    border-color: #64748b;
  }

  .analyze-button {
    background: #0ea5e9;
  }

  .analyze-button:hover {
    background: #0284c7;
  }
}

/* ====== HIGH CONTRAST MODE ====== */
@media (prefers-contrast: more) {
  .app-shell {
    background: #ffffff;
  }

  .app-card {
    border: 3px solid #000000;
  }

  .analyze-button {
    border: 2px solid #000000;
  }

  .app-title {
    font-weight: 900;
  }
}

/* ====== REDUCED MOTION ====== */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ====== HOVER EFFECTS (for devices that support it) ====== */
@media (hover: hover) {
  .analyze-button:hover {
    opacity: 0.95;
    transform: translateY(-1px);
  }

  .tab-button:hover {
    opacity: 0.8;
  }
}

/* ====== NO HOVER (touchscreen devices) ====== */
@media (hover: none) {
  .analyze-button:active {
    opacity: 0.95;
  }

  .tab-button:active {
    opacity: 0.8;
  }
}

/* ====== FIT CONTENT ON SMALL SCREENS ====== */
@media (max-width: 600px) {
  .result-card {
    padding: 12px;
  }

  .risk-level-text {
    font-size: 1.2rem;
  }

  .condition-text {
    font-size: 0.95rem;
  }

  .advice-text {
    font-size: 0.9rem;
  }

  .health-tip-card {
    padding: 12px;
  }

  .hospital-card {
    padding: 12px;
  }
}

/* ====== BOTTOM NAV SAFE AREA ====== */
.app-shell {
  padding-bottom: max(24px, calc(env(safe-area-inset-bottom) + 24px));
}

/* ====== OPTIMIZE IMAGES FOR MOBILE ====== */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ====== SMOOTH SCROLLING ====== */
html {
  scroll-behavior: smooth;
}

/* ====== INPUT FOCUS STYLES FOR MOBILE ====== */
input:focus,
textarea:focus,
select:focus,
button:focus {
  outline: 2px solid #00897b;
  outline-offset: 2px;
}

/* ====== MOBILE FORM OPTIMIZATION ====== */
input[type="text"],
input[type="email"],
input[type="tel"],
textarea,
select {
  -webkit-appearance: none;
  appearance: none;
  border-radius: 8px;
  padding: 12px;
}

/* Remove iOS input zoom on focus */
input[type="text"],
input[type="email"],
input[type="tel"],
textarea {
  font-size: 16px;
}

/* ====== SWIPE GESTURE SUPPORT ====== */
.tabs-container {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* ====== LOADING & PERFORMANCE ====== */
.loading-spinner {
  margin: 24px auto;
}

.skeleton-loader {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ====== PRINT STYLES ====== */
@media print {
  .app-shell {
    padding: 0;
    background: white;
  }

  .analyze-button,
  .tab-button {
    display: none;
  }
}
